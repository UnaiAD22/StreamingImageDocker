<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>KMM 2. Praktika - Streaming</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/bideo.css">
    <!-- Agrega el script de Video.js -->
    <link href="https://vjs.zencdn.net/8.0.4/video-js.css" rel="stylesheet">
    <script src="https://vjs.zencdn.net/8.0.4/video.min.js"></script>
    <link rel="icon" href="img/LiveStreamingIcon.png" type="image/x-icon">
</head>
<body>
    <!-- Menú de navegación -->
    <nav class="menu">
      <h2>Bezeroak:</h2>
        <a href="#html5-video">- HTML5</a>
        <a href="#videojs-video">- Video.js</a>
		<a href="#kalitate_aldaketa">- Bideoaren kalitate aldaketa</a>
		<a href="#streaming_video">- Streaming</a>
    </nav>

    <br>

    <h1><u>KMM - 2. PRAKTIKA - Streaming</u></h1>

    <br>

    <p>Texto insertar futuro</p>

    <br>

    <!-- Sección de videos -->
    <div class="contenedor" id="html5-video">
        <h2>Bideoak <u><i>HTML5</u></i>-ekin erabiltzen</h2>
        
        <p>Texto insertar futuro</p>

        <br>

        <video width="750" controls>
            <source src="bideoak/bideoa1.mp4" type="video/mp4" />
            <source src="bideoak/bideoa1.ogg" type="video/ogg" />
            Tu navegador no es compatible con vídeos HTML5.
        </video>
    </div>

    <div class="contenedor" id="videojs-video">
        <h2>Bideoak <u><i>Video.js</u></i>-rekin erabiltzen</h2>
        
        <p>Texto insertar futuro</p>

        <br>

        <video id="fm-video" class="fm-video video-js" controls preload="auto" data-setup='{}' width="750">
            <source src="bideoak/bideoa1.mp4" type="video/mp4">
            <source src="bideoak/bideoa1.ogg" type="video/ogg">
            Tu navegador no es compatible con vídeos HTML5.
        </video>
    </div>
	
    <div class="contenedor" id="kalitate_aldaketa">
        <h2>Bideoaren <u><i>kalitate aldaketa</u></i></h2>

        <p>Texto insertar aquí</p>
        <br>

        <!-- Reproductor de Video.js -->
        <video id="videoPlayer" class="video-js vjs-default-skin" controls preload="auto" width="750">
            <source src="bideoak/1080p.m3u8" type="application/x-mpegURL" data-quality="1080p">
        </video>
        
        <br>

        <select id="qualitySelector">
            <option value="144p.m3u8">144p</option>
            <option value="240p.m3u8">240p</option>
            <option value="360p.m3u8">360p</option>
            <option value="480p.m3u8">480p</option>
            <option value="720p.m3u8">720p</option>
            <option value="1080p.m3u8" selected>1080p</option>
            <option value="1440p.m3u8">1440p</option>
        </select>

    <script>
        const videoPlayer = videojs('videoPlayer'); // Inicializa Video.js
        const qualitySelector = document.getElementById('qualitySelector');

        // Cambiar la calidad al seleccionar una opción
        qualitySelector.addEventListener('change', (event) => {
            const selectedQuality = event.target.value;

            videoPlayer.pause();
            videoPlayer.src({
                src: `bideoak/${selectedQuality}`,
                type: 'application/x-mpegURL'
            });
            videoPlayer.load();
            videoPlayer.play();
        });
    </script>
    </div>

	<div class="contenedor" id="streaming_video">
		<h2><u><i>STREAMING</u></i>-a</h2>
		
		<p>Texto insertar aqui</p>
		
		<br>
		
    <main>
        <div id="video-container">
            <video id="streamingVideo" controls autoplay width="750"></video>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        // Configurar el reproductor de HLS
        const video = document.getElementById('streamingVideo');
        const streamUrl = 'http://localhost/hls/stream.m3u8'; // URL del streaming HLS

        if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(streamUrl);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, function () {
                video.play();
            });
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = streamUrl;
            video.addEventListener('loadedmetadata', function () {
                video.play();
            });
        } else {
            console.error('HLS ezin da erreproduzitu.');
        }
    </script>
	</div>
</body>
</html>
